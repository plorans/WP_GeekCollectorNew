# -------------------------
# CONFIGURACIÓN PHP
# -------------------------
<IfModule mod_php7.c>
  php_value upload_max_filesize 128M
  php_value post_max_size 128M
  php_value memory_limit 256M
  php_value max_execution_time 300
  php_value max_input_time 300
</IfModule>

<IfModule mod_php.c>
  php_value upload_max_filesize 128M
  php_value post_max_size 128M
  php_value memory_limit 256M
  php_value max_execution_time 300
  php_value max_input_time 300
</IfModule>

# -------------------------
# CORS CONFIGURATION
# -------------------------
<IfModule mod_headers.c>
  # Solución 1: Solo un Access-Control-Allow-Origin
  SetEnvIf Origin "^http(s)?://(.+\.)?(localhost|127\.0\.0\.1)(:[0-9]+)?$" origin_is=$0
  SetEnvIf Origin "^https?://geekcollector\.com$" origin_is=$0

  Header always set Access-Control-Allow-Origin "%{origin_is}e" env=origin_is
  Header always set Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
  Header always set Access-Control-Allow-Headers "Content-Type, Authorization, X-Requested-With, Accept, Origin"
  Header always set Access-Control-Allow-Credentials "true"
  Header always set Access-Control-Max-Age "3600"
</IfModule>

# Handle OPTIONS method for CORS preflight
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{REQUEST_METHOD} OPTIONS
  RewriteRule ^(.*)$ $1 [R=200,L,E=HTTP_ORIGIN:%{HTTP:ORIGIN}]
</IfModule>
